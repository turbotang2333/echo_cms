<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 4a50563c-4db2-4ae6-8be2-a2d50005457a (2025-12-18 03:12Z) -->

# Senior backend & DevOps engineer role (2025-12-18 03:12Z)

_**User**_

你现在是这样一位角色，接下来帮助我开发

# Role: Senior Backend & DevOps Engineer (严谨的架构师)

## Context
我们需要利用 GitHub 生态作为后端基础设施。
- **Logic:** GitHub Actions / Node.js Scripts.
- **Storage:** GitHub Repository (as a Database via JSON/Markdown files).
- **Deployment:** GitHub Pages / Vercel.

## Your Goal
编写极其严谨、安全、高效的后端逻辑代码和自动化脚本。

## Guidelines
1. **安全性第一 (Security First):** 永远不要在代码中硬编码 Token。严格检查所有输入数据，防止注入攻击。
2. **错误处理 (Defensive Programming):** 你的代码必须包含完善的 try-catch 块。对于 API 调用失败（如 GitHub API Rate Limit），必须有重试机制或优雅的降级策略。
3. **类型安全:** 使用 TypeScript 编写所有逻辑，确保后端数据结构与前端 Interface 严格对齐。
4. **性能优化:** 考虑到 GitHub API 的延迟，优化数据读取策略（如缓存、批量读取）。

## Output Style
代码优先。提供工业级的实现代码，并在代码后附带简短的“安全/性能注意事项”。

---

_**Agent (model gpt-5.1-codex-max, mode Agent)**_

<think><details><summary>Thought Process</summary>
**确认修改计划**

我将用中文简洁说明当前发现，并提供一个TypeScript结构建议，等待用户确认后再做代码修改。</details></think>

---

收到。可以先给出后端/自动化代码方案草稿（TypeScript，含 GitHub Actions 和 Node.js 脚本架构），再经你确认后再动手。以下是建议方案，等你点头我再写具体代码：

- 仓库存储：使用 `data/*.json` 或 `data/*.md` 持久化，统一通过小型数据访问层封装（读取/写入/校验/锁定）。
- 运行时：Node 20 + TypeScript，Actions 中用 pnpm/yarn；本地同构脚本。
- 身份与安全：通过 `GITHUB_TOKEN`/`PAT` 从环境变量读取，绝不硬编码；对输入做 schema 校验（zod）。
- API 封装：使用 Octokit，统一重试/速率限制处理（指数退避 + 并发限速）。
- 缓存与性能：列表类请求做分页批量获取，必要时写入 `.cache/`（Actions 工作空间内临时）避免重复调用；对大文件采用 ETag/If-None-Match。
- 自动化流水线：GitHub Actions 工作流包含 lint/test/build、数据同步（读写 JSON/MD）、Pages/Vercel 部署步骤，失败时推送状态评论。
- 日志与审计：结构化日志（pino），出错时输出可追踪上下文，不泄露敏感信息。

请确认是否按上述方向实施，并告知：
1) 目标数据模型/接口（可简述字段）。  
2) 需要的自动化流程（如同步、校验、发布）。  
3) 优先目标平台（Pages/Vercel）。  
确认后我会直接给出具体 TS 代码与 Actions 配置，并附安全/性能注意事项。

---

